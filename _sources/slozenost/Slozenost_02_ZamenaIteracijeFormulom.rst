Замена итерације формулом
=========================

Један од важних савета за побољшање сложености алгоритама је тај да не
терамо рачунар да врши дуготрајна израчунавања која се могу извршити и
“пешке”, применом математике. Наиме, често се одређене вредности
израчунавају применом итеративних поступака. На пример, збир елемената
неког низа израчунавамо додавањем једног по једног елемента. То даје
тражени резултат, али и одузима неко време. Постоје ситуације када су
елементи који се обрађују правилни и када се коначан резултат може
добити применом неке задате формуле, без примене итеративног поступка.
На пример, ако знамо да треба сабрати првих :math:`n` елемената низа
:math:`1, 2, 3, \ldots, n`, нема потребе да примењујемо итеративни
поступак сабирања чија је сложеност :math:`O(n)`, већ је довољно да у
времену :math:`O(1)` применимо Гаусову формулу на основу које знамо да
је

.. math:: 1 + 2 + \ldots n = \frac{n(n+1)}{2}

За доказ ове чињенице, слика говори више од речи

::

    n
   ++++
   *+++
   **++ n+1
   ***+
   ****

Још неке формуле се често могу употребити за смањење сложености (али и
за саму анализу сложености), па ћемо их у наставку описати.

Аритметички и геометријски низ
------------------------------

Сличне формуле које су нам корисне су формуле за :math:`n`-ти члан и
збир првих :math:`n` елемената аритметичког низа :math:`a_0`,
:math:`а_0 + d`, :math:`a_0 + 2d`, :math:`\ldots`.

.. math:: a_n = а_0 + (n-1)d

.. math:: \sum_{i=0}^{n} a_i = \frac{n(a_0 + a_n)}{2},

као и за :math:`n`-ти члан и збир првих :math:`n` елемената
геометријског низа :math:`a_0`, :math:`а_0\cdot q`,
:math:`a_0 \cdot q^2`, :math:`\ldots`.

.. math:: a_n = a_0\cdot q^n

.. math:: \sum_{i=0}^{n} a_i = a_0\frac{1-q^{n+1}}{1-q}.

Збирови степена
---------------

Прикажимо како можемо израчунати суму квадрата првих :math:`n` природних
бројева. Важи да је

.. math:: (k+1)^3 - k^3 = k^3 + 3k^2 + 3k + 1 - k^3 = 3k^2 + 3k + 1.

Зато је

.. math::

   \begin{eqnarray*}
   2^3 - 1^3 &=& 3\cdot 1^2 + 3\cdot 1 + 1\\
   3^3 - 2^3 &=& 3\cdot 2^2 + 3\cdot 2 + 1\\
   \ldots\\
   (n+1)^3 - n^3 &=& 3\cdot n^2 + 3\cdot n + 1
   \end{eqnarray*}`

Сабирањем претходних једнакости добијамо

.. math::

   (n+1)^3 - 1 = 3\cdot(1^2+\ldots +n^2) + 3\cdot(1+\ldots+n) +
   (1+\ldots + 1)

тј.

.. math::

   3\cdot \sum_{k=1}^{n} k^2 = (n+1)^3-1 - 3\sum_{k=1}^{n} k -
   \sum_{k=1}^{n} 1.

На основу формула за збир аритметичког низа важи

.. math::

   \sum_{k=1}^n k^2 = \frac{1}{3}\cdot\left(n^3 +3n^2 +3n -
   3\frac{n(n+1)}{2} - n\right) = \frac{n\cdot (2n+1)\cdot (n+1)}{6}

Потпуно аналогно, сумирањем израза :math:`(k+1)^4 - k^4` од :math:`1` до
:math:`н` и применом до сада изведених формула може се показати да је

.. math:: 1^3+2^3+\ldots + n^3 = \sum_{k=1}^n k^3 = \left(\frac{n(n+1)}{2}\right)^2.

Ово тврђење, познато као Никомахова теорема показује да је збир првих
:math:`n` кубова једнак квадрату збира првих :math:`n` природних
бројева.

Поступак се може употребити и да се израчунају збирови виших степена
првих :math:`n` природних бројева. Генерално, важи да се збир степена
:math:`1^k + 2^k + \ldots + n^k` асимптотски понаша као
:math:`\Theta(\frac{n^{k+1}}{k+1})`.

**Задаци:**

Уради сада задатке на следећој страни. Напиши прво неефикасна решења уз помоћ
петљи, а затим и ефикаснија решења уз помоћ математичких формула.

.. comment

    -  N-ти дан тренинга
    -  Спортске припреме
    -  Аритметички троугао
    -  Аритметички квадрат
    -  Број подстрингова који почињу и завршавају са 1
    -  Недостајући број
    -  Хлебови
    -  Дељиви око броја
    -  Број дељивих у интервалу
    -  Пријатељски бројеви
    -  Спортски турнир инсеката
          
